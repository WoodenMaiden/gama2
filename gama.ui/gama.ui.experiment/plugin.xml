<?xml version="1.0" encoding="UTF-8"?>
<?eclipse version="3.4"?>
<plugin>
	<extension
		point="org.eclipse.ui.perspectives">
		<perspective
			class="gama.ui.experiment.perspective.SimulationPerspective"
			fixed="false"
			icon="platform:/plugin/gama.ui.shared/icons/views/perspective.simulation.png"
			id="gama.ui.perspective.SimulationPerspective"
			name="Simulation">
			<description>
            The base perspective definition for simulation perspectives
         </description>
		</perspective>
	</extension>
	<extension
		point="org.eclipse.ui.perspectiveExtensions">
		<perspectiveExtension
			targetID="gama.ui.perspective.SimulationPerspective">
			<viewShortcut
				id="gama.ui.view.ConsoleView"></viewShortcut>
			<viewShortcut
				id="gama.ui.view.ErrorView"></viewShortcut>
			<viewShortcut
				id="gama.ui.view.ParameterView"></viewShortcut>
		</perspectiveExtension>
	</extension>
	<extension
		point="org.eclipse.ui.views">
		<view
			allowMultiple="false"
			category="gama.ui.components"
			class="gama.ui.experiment.console.ConsoleView"
			icon="platform:/plugin/gama.ui.shared/icons/views/tabs/view.console.png"
			id="gama.ui.view.ConsoleView"
			name="Console"
			restorable="false"></view>
		<view
			allowMultiple="true"
			category="gama.ui.components"
			class="gama.ui.experiment.inspectors.PopulationInspectView"
			icon="platform:/plugin/gama.ui.shared/icons/views/tabs/view.browser.png"
			id="gama.ui.view.TableAgentInspectView"
			name="Browser"
			restorable="false"></view>
		<view
			allowMultiple="true"
			category="gama.ui.components"
			class="gama.ui.experiment.inspectors.AgentInspectView"
			icon="platform:/plugin/gama.ui.shared/icons/views/tabs/view.inspector.png"
			id="gama.ui.view.AgentInspectView"
			name="Inspector"
			restorable="false"></view>
		<view
			allowMultiple="false"
			category="gama.ui.components"
			class="gama.ui.experiment.inspectors.MonitorView"
			icon="platform:/plugin/gama.ui.shared/icons/views/tabs/view.monitors.png"
			id="gama.ui.view.MonitorView"
			name="Monitors"
			restorable="false"></view>
		<view
			allowMultiple="false"
			category="gama.ui.components"
			class="gama.ui.experiment.inspectors.ExperimentParametersView"
			icon="platform:/plugin/gama.ui.shared/icons/views/tabs/view.parameters.png"
			id="gama.ui.view.ParameterView"
			name="Parameters"
			restorable="false"></view>
		<view
			allowMultiple="false"
			category="gama.ui.components"
			class="gama.ui.experiment.views.ErrorView"
			icon="platform:/plugin/gama.ui.shared/icons/views/tabs/view.errors.png"
			id="gama.ui.view.ErrorView"
			name="Errors"
			restorable="false"></view>
		<view
			category="gama.ui.components"
			class="gama.ui.experiment.user.UserControlView"
			fastViewWidthRatio="0.2"
			icon="platform:/plugin/gama.ui.shared/icons/views/tabs/view.panel.png"
			id="gama.ui.view.userControlView"
			name="User Control"
			restorable="false"></view>
	</extension>
	<extension
		point="org.eclipse.ui.menus">
		<menuContribution
			locationURI="menu:org.eclipse.ui.main.menu">
			<menu
				id="gama.ui.menu.experiment"
				label="Experiment">
				<visibleWhen
					checkEnabled="false">
					<reference
						definitionId="isSimulationReady"></reference>
				</visibleWhen>
				<command
					commandId="gama.ui.command.PlaySimulation"
					disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.run_disabled.png"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.run.png"
					label="Run Experiment"
					style="push">
					<visibleWhen
						checkEnabled="false">
						<reference
							definitionId="isSimulationPaused"></reference>
					</visibleWhen>
				</command>
				<command
					commandId="gama.ui.command.PauseSimulation"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.pause.png"
					disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.pause_disabled.png"
					label="Pause Experiment"
					mnemonic="M1+P"
					style="push">
					<visibleWhen
						checkEnabled="false">
						<reference
							definitionId="isSimulationRunning"></reference>
					</visibleWhen>
				</command>
				<command
					commandId="gama.ui.command.StepByStepSimulation"
					disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step_disabled.png"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step.png"
					label="Step Experiment"
					style="push"
					tooltip="Advance the experiment step by step">
					<visibleWhen
						checkEnabled="false">
						<reference
							definitionId="isSimulationReady"></reference>
					</visibleWhen>
				</command>
				<command
					commandId="gama.ui.command.StepBackSimulation"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step.back.png"
					disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step.back_disabled.png"
					label="Step Back Experiment"
					style="push"
					tooltip="Make One step back in the simulation">
					<visibleWhen
						checkEnabled="false">
						<and>
							<reference
								definitionId="isSimulationReady"></reference>
							<reference
								definitionId="isSimulationMemorize"></reference>
						</and>
					</visibleWhen>
				</command>
				<separator
					name="separator"
					visible="true"></separator>
				<command
					commandId="gama.ui.command.ReloadSimulation"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.reload.png"
					disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.reload_disabled.png"
					label="Reload Experiment"
					mnemonic="M1+M2+R"
					style="push"></command>
				<separator
					name="separator"
					visible="true"></separator>
				<command
					commandId="gama.ui.command.PauseAndEdit"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/errors.stop.png"
					label="Stop at first error"
					style="toggle"></command>
				<command
					commandId="gama.ui.command.WarningsAsErrors"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/errors.warnings.png"
					label="Treat warnings like errors"
					style="toggle"></command>
				<command
					commandId="gama.ui.command.ShowErrors"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/errors.show.png"
					label="Display errors and warnings"
					style="toggle"></command>
				<separator
					name="separator"
					visible="true"></separator>
				<command
					commandId="gama.ui.command.Cancel"
					icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.stop.png"
					disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.stop_disabled.png"
					label="Close Experiment"
					style="push"
					tooltip="Stops the current experiment and dispose of it.">
					<visibleWhen
						checkEnabled="false">
						<and>
							<reference
								definitionId="isInSimulationPerspective"></reference>
							<reference
								definitionId="isSimulationExisting"></reference>
						</and>
					</visibleWhen>
				</command>
			</menu>
			<menu
				label="Agents">
				<dynamic
					class="gama.ui.experiment.menus.AgentsMenu"
					id="gama.ui.menu.agents"></dynamic>
				<visibleWhen
					checkEnabled="false">
					<reference
						definitionId="isSimulationReady"></reference>
				</visibleWhen>
			</menu>
			<menu
				id="gama.ui.menu.views"
				label="Views">
				<command
					commandId="gama.ui.command.InteractiveConsole"
					icon="platform:/plugin/gama.ui.shared/icons/views/open.interactive.console.png"
					label="Interactive Console"
					style="push"></command>
				<command
					commandId="org.eclipse.ui.window.hideShowEditors"
					icon="platform:/plugin/gama.ui.shared/icons/views/perspective.save.png"
					label="Hide/Show Editors"
					style="push"
					tooltip="Hide or show the editors"></command>
				<separator
					name="separator"
					visible="true"></separator>
				<command
					commandId="gama.ui.command.ShowHideParametersView"
					icon="platform:/plugin/gama.ui.shared/icons/views/open.parameters.png"
					label="Parameters"
					style="push">
					<visibleWhen
						checkEnabled="false">
						<reference
							definitionId="isSimulationReady"></reference>
					</visibleWhen>
				</command>
				<command
					commandId="gama.ui.command.ShowHideConsoleView"
					icon="platform:/plugin/gama.ui.shared/icons/views/open.console.png"
					label="Console"
					style="push">
					<visibleWhen
						checkEnabled="false">
						<reference
							definitionId="isSimulationReady"></reference>
					</visibleWhen>
				</command>
				<command
					commandId="gama.ui.command.AddMonitor"
					icon="platform:/plugin/gama.ui.shared/icons/views/open.monitor.png"
					label="Add Monitor"
					style="push">
					<visibleWhen
						checkEnabled="false">
						<reference
							definitionId="isSimulationReady"></reference>
					</visibleWhen>
				</command>
				<separator
					name="separator"
					visible="true"></separator>
				<menu
					icon="platform:/plugin/gama.ui.shared/icons/views/layout.stack.png"
					label="Manage outputs...">
					<visibleWhen
						checkEnabled="false">
						<reference
							definitionId="isSimulationReady"></reference>
					</visibleWhen>
					<dynamic
						class="gama.ui.experiment.menus.OutputsMenu"
						id="gama.ui.menu.ManageOutputs"></dynamic>
				</menu>
				<menu
					icon="platform:/plugin/gama.ui.shared/icons/views/layout.menu.png"
					label="Layout Displays... (Experimental)">
					<command
						commandId="gama.ui.command.LayoutDisplays"
						icon="platform:/plugin/gama.ui.shared/icons/views/layout.stack.png"
						label="Stacked"
						style="push">
						<parameter
							name="gama.displays.layout"
							value="Stacked"></parameter>
					</command>
					<command
						commandId="gama.ui.command.LayoutDisplays"
						icon="platform:/plugin/gama.ui.shared/icons/views/layout.grid.png"
						label="Split"
						style="push">
						<parameter
							name="gama.displays.layout"
							value="Split"></parameter>
					</command>
					<command
						commandId="gama.ui.command.LayoutDisplays"
						icon="platform:/plugin/gama.ui.shared/icons/views/layout.horizontal.png"
						label="Horizontally"
						style="push">
						<parameter
							name="gama.displays.layout"
							value="Horizontal"></parameter>
					</command>
					<command
						commandId="gama.ui.command.LayoutDisplays"
						icon="platform:/plugin/gama.ui.shared/icons/views/layout.vertical.png"
						label="Vertically"
						style="push">
						<parameter
							name="gama.displays.layout"
							value="Vertical"></parameter>
					</command>
					<visibleWhen
						checkEnabled="false">
						<and>
							<reference
								definitionId="isSimulationReady"></reference>
							<reference
								definitionId="isInSimulationPerspective"></reference>
						</and>
					</visibleWhen>
					<separator
						name="separator"
						visible="true"></separator>
					<command
						commandId="gama.ui.command.ToggleTabs"
						label="Toggle Tabs"
						style="push"></command>
					<command
						commandId="gama.ui.command.CopyLayout"
						label="Copy Layout to Clipboard"
						style="push"></command>
				</menu>
				<menu
					icon="platform:/plugin/gama.ui.shared/icons/views/view.other.png"
					label="Other...">
					<menu
						icon="platform:/plugin/gama.ui.shared/icons/views/perspective.open.png"
						label="Switch to Perspective...">
						<command
							commandId="gama.ui.command.SwitchToModelingPerspective"
							icon="platform:/plugin/gama.ui.shared/icons/views/perspective.modeling.png"
							disabledIcon="platform:/plugin/gama.ui.shared/icons/views/perspective.modeling_disabled.png"
							label="Modeling"
							style="push"
							tooltip="Open modeling perspective">
							<visibleWhen
								checkEnabled="false">
								<not>
									<reference
										definitionId="isInModelingPerspective"></reference>
								</not>
							</visibleWhen>
						</command>
						<command
							commandId="gama.ui.command.SwitchToSimulationPerspective"
							icon="platform:/plugin/gama.ui.shared/icons/views/perspective.simulation.png"
							disabledIcon="platform:/plugin/gama.ui.shared/icons/views/perspective.simulation_disabled.png"
							label="Simulation"
							style="push"
							tooltip="Open simulation perspective">
							<visibleWhen
								checkEnabled="false">
								<not>
									<reference
										definitionId="isInSimulationPerspective"></reference>
								</not>
							</visibleWhen>
						</command>
					</menu>
					<command
						commandId="gama.ui.command.ResetPerspective"
						icon="platform:/plugin/gama.ui.shared/icons/views/perspective.reset.png"
						label="Reset Perspective (restart required)..."
						style="push">
						<visibleWhen
							checkEnabled="false">
							<reference
								definitionId="isInModelingPerspective"></reference>
						</visibleWhen>
					</command>
					<separator
						name="separator"
						visible="true"></separator>
					<menu
						icon="platform:/plugin/gama.ui.shared/icons/views/open.view.png"
						label="Show View">
						<dynamic
							class="gama.ui.shared.commands.ShowViewContributionItem"
							id="gama.ui.menu.sub.views"></dynamic>
					</menu>
					<command
						commandId="org.eclipse.ui.ToggleCoolbarAction"
						icon="platform:/plugin/gama.ui.shared/icons/views/toggle.toolbar.png"
						label="Toggle Toolbar"
						style="push"
						tooltip="Toggle the main toolbar on and off"></command>
				</menu>
			</menu>
		</menuContribution>
		<menuContribution
			locationURI="toolbar:gama.ui.application.common.toolbar?after=gama.ui.command.SwitchToModelingPerspective">
			<command
				commandId="gama.ui.command.SwitchToSimulationPerspective"
				disabledIcon="platform:/plugin/gama.ui.shared/icons/views/perspective.simulation_disabled.png"
				icon="platform:/plugin/gama.ui.shared/icons/views/perspective.simulation.png"
				label="Simulation perspective"
				style="push"
				tooltip="Open simulation perspective">
				<visibleWhen
					checkEnabled="false">
					<and>
						<reference
							definitionId="isInModelingPerspective"></reference>
					</and>
				</visibleWhen>
			</command>
			<command
				commandId="gama.ui.command.dummy"
				icon="platform:/plugin/gama.ui.shared/icons/spacer.png"
				style="push"
				tooltip="  "></command>
			<control
				class="gama.ui.experiment.controls.StatusControlContribution"
				id="gama.ui.application.status"></control>
			<command
				commandId="gama.ui.command.dummy"
				icon="platform:/plugin/gama.ui.shared/icons/spacer.png"
				style="push"
				tooltip="  "></command>
			<command
				commandId="gama.ui.command.PlaySimulation"
				icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.run.png"
				disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.run_disabled.png"
				label="Run Experiment"
				style="push"
				tooltip="Run the currently opened experiment">
				<visibleWhen
					checkEnabled="false">
					<reference
						definitionId="isSimulationPaused"></reference>
				</visibleWhen>
			</command>
			<command
				commandId="gama.ui.command.PauseSimulation"
				disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.pause_disabled.png"
				icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.pause.png"
				label="Pause Experiment"
				style="push"
				tooltip="Pause the currently opened experiment">
				<visibleWhen
					checkEnabled="false">
					<reference
						definitionId="isSimulationRunning"></reference>
				</visibleWhen>
			</command>
			<command
				commandId="gama.ui.command.StepByStepSimulation"
				disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step_disabled.png"
				icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step.png"
				label="Step Experiment"
				style="push"
				tooltip="Advance the experiment step by step">
				<visibleWhen
					checkEnabled="false">
					<reference
						definitionId="isSimulationReady"></reference>
				</visibleWhen>
			</command>
			<command
				commandId="gama.ui.command.StepBackSimulation"
				icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step.back.png"
				disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.step.back_disabled.png"
				label="Step Back"
				style="push"
				tooltip="Make One step back in the simulation">
				<visibleWhen
					checkEnabled="false">
					<and>
						<reference
							definitionId="isSimulationReady"></reference>
						<reference
							definitionId="isSimulationMemorize"></reference>
					</and>
				</visibleWhen>
			</command>
			<control
				class="gama.ui.experiment.controls.SimulationSpeedContributionItem"
				id="gama.ui.application.speed">
				<visibleWhen
					checkEnabled="false">
					<reference
						definitionId="isSimulationReady"></reference>
				</visibleWhen>
			</control>
			<command
				commandId="gama.ui.command.SynchronizeExperiment"
				icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.sync.png"
				label="Synchronize Experiment"
				style="toggle">
				<visibleWhen
					checkEnabled="false">
					<and>
						<reference
							definitionId="isInSimulationPerspective"></reference>
						<reference
							definitionId="isSimulationExisting"></reference>
					</and>
				</visibleWhen>
			</command>
			<command
				commandId="gama.ui.command.ReloadSimulation"
				icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.reload.png"
				label="Reload Experiment"
				mnemonic="M1+M2+R"
				style="push">
				<visibleWhen
					checkEnabled="false">
					<and>
						<reference
							definitionId="isInSimulationPerspective"></reference>
						<reference
							definitionId="isSimulationExisting"></reference>
					</and>
				</visibleWhen>
			</command>
			<command
				commandId="gama.ui.command.Cancel"
				icon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.stop.png"
				disabledIcon="platform:/plugin/gama.ui.shared/icons/experiment/experiment.stop_disabled.png"
				label="Close Experiment"
				style="push"
				tooltip="Stops the currently opened experiment and closes its perspective">
				<visibleWhen
					checkEnabled="false">
					<and>
						<reference
							definitionId="isInSimulationPerspective"></reference>
						<reference
							definitionId="isSimulationExisting"></reference>
					</and>
				</visibleWhen>
			</command>
			<control
				class="gama.ui.shared.controls.Separator"
				id="separator2876"></control>
		</menuContribution>
	</extension>
	<extension
		point="org.eclipse.ui.handlers">
		<handler
			class="gama.ui.experiment.commands.StepBackHandler"
			commandId="gama.ui.command.StepBackSimulation">
			<activeWhen>
				<with
					variable="gama.ui.experiment.SimulationStepBack">
					<equals
						value="CAN_STEP_BACK"></equals>
				</with>
			</activeWhen>
			<enabledWhen>
				<with
					variable="gama.ui.experiment.SimulationStepBack">
					<equals
						value="CAN_STEP_BACK"></equals>
				</with>
			</enabledWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.PlayPauseSimulationHandler"
			commandId="gama.ui.command.PlaySimulation">
			<activeWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</activeWhen>
			<enabledWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</enabledWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.StepByStepHandler"
			commandId="gama.ui.command.StepByStepSimulation">
			<activeWhen>
				<and>
					<reference
						definitionId="isSimulationReady"></reference>
					<not>
						<reference
							definitionId="isSimulationBatch"></reference>
					</not>
				</and>
			</activeWhen>
			<enabledWhen>
				<and>
					<reference
						definitionId="isSimulationReady"></reference>
					<not>
						<reference
							definitionId="isSimulationRunning"></reference>
					</not>
				</and>
			</enabledWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.ReloadSimulationHandler"
			commandId="gama.ui.command.ReloadSimulation">
			<activeWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.AddMonitorHandler"
			commandId="gama.ui.command.AddMonitor">
			<activeWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.ShowHideParametersViewHandler"
			commandId="gama.ui.command.ShowHideParametersView">
			<activeWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.ShowHideConsoleViewHandler"
			commandId="gama.ui.command.ShowHideConsoleView">
			<activeWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.CancelRun"
			commandId="gama.ui.command.Cancel">
			<activeWhen>
				<reference
					definitionId="isInSimulationPerspective"></reference>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.ErrorsPauseAndEdit"
			commandId="gama.ui.command.PauseAndEdit"></handler>
		<handler
			class="gama.ui.experiment.commands.TreatWarningsAsErrors"
			commandId="gama.ui.command.WarningsAsErrors"></handler>
		<handler
			class="gama.ui.experiment.commands.ShowErrors"
			commandId="gama.ui.command.ShowErrors"></handler>
		<handler
			class="gama.ui.shared.commands.SwitchToModeling"
			commandId="gama.ui.command.SwitchToModelingPerspective">
			<activeWhen>
				<or>
					<reference
						definitionId="isSimulationReady"></reference>
					<reference
						definitionId="isSimulationFinished"></reference>
				</or>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.ToggleDisplayTabs"
			commandId="gama.ui.command.ToggleTabs">
			<activeWhen>
				<and>
					<reference
						definitionId="isInSimulationPerspective"></reference>
					<reference
						definitionId="isSimulationReady"></reference>
				</and>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.ArrangeDisplayViews"
			commandId="gama.ui.command.LayoutDisplays">
			<activeWhen>
				<and>
					<reference
						definitionId="isInSimulationPerspective"></reference>
					<reference
						definitionId="isSimulationReady"></reference>
				</and>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.shared.commands.SwitchToSimulation"
			commandId="gama.ui.command.SwitchToSimulationPerspective">
			<activeWhen>
				<and>
					<reference
						definitionId="isInModelingPerspective"></reference>
					<not>
						<with
							variable="gama.ui.experiment.SimulationRunningState">
							<equals
								value="NONE"></equals>
						</with>
					</not>
				</and>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.CopyLayout"
			commandId="gama.ui.command.CopyLayout">
			<activeWhen>
				<and>
					<reference
						definitionId="isInSimulationPerspective"></reference>
					<reference
						definitionId="isSimulationReady"></reference>
				</and>
			</activeWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.ResetModelingPerspective"
			commandId="gama.ui.command.ResetPerspective">
			<activeWhen>
				<reference
					definitionId="isInModelingPerspective"></reference>
			</activeWhen>
			<enabledWhen>
				<reference
					definitionId="isInModelingPerspective"></reference>
			</enabledWhen>
		</handler>
		<handler
			class="gama.ui.experiment.commands.SynchronizeExperimentHandler"
			commandId="gama.ui.command.SynchronizeExperiment">
			<activeWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</activeWhen>
			<enabledWhen>
				<reference
					definitionId="isSimulationReady"></reference>
			</enabledWhen>
		</handler>
	</extension>
	<extension
		point="org.eclipse.ui.contexts">
		<context
			id="gama.ui.application.simulation.context"
			name="In Experiments"
			parentId="org.eclipse.ui.contexts.dialogAndWindow"></context>
	</extension>
	<extension
		point="org.eclipse.core.expressions.definitions">
		<definition
			id="isSimulationReady">
			<and>
				<reference
					definitionId="isInSimulationPerspective"></reference>
				<or>
					<with
						variable="gama.ui.experiment.SimulationRunningState">
						<equals
							value="RUNNING"></equals>
					</with>
					<with
						variable="gama.ui.experiment.SimulationRunningState">
						<equals
							value="STOPPED"></equals>
					</with>
				</or>
			</and>
		</definition>
		<definition
			id="isSimulationRunning">
			<and>
				<reference
					definitionId="isInSimulationPerspective"></reference>
				<with
					variable="gama.ui.experiment.SimulationRunningState">
					<equals
						value="RUNNING"></equals>
				</with>
			</and>
		</definition>
		<definition
			id="isSimulationPaused">
			<and>
				<reference
					definitionId="isInSimulationPerspective"></reference>
				<with
					variable="gama.ui.experiment.SimulationRunningState">
					<equals
						value="STOPPED"></equals>
				</with>
			</and>
		</definition>
		<definition
			id="isSimulationExisting">
			<and>
				<reference
					definitionId="isInSimulationPerspective"></reference>
				<not>
					<with
						variable="gama.ui.experiment.SimulationRunningState">
						<equals
							value="NONE"></equals>
					</with>
				</not>
			</and>
		</definition>
		<definition
			id="isGamlEditorOpened">
			<and>
				<reference
					definitionId="isActiveEditorAnInstanceOfXtextEditor"></reference>
				<with
					variable="activeEditor">
					<test
						forcePluginActivation="true"
						property="org.eclipse.xtext.ui.editor.XtextEditor.languageName"
						value="gama.lang.gaml.Gaml"></test>
				</with>
			</and>
		</definition>
		<definition
			id="isSimulationBatch">
			<and>
				<reference
					definitionId="isInSimulationPerspective"></reference>
				<with
					variable="gama.ui.experiment.SimulationType">
					<equals
						value="BATCH"></equals>
				</with>
			</and>
		</definition>
		<definition
			id="isSimulationMemorize">
			<and>
				<reference
					definitionId="isInSimulationPerspective"></reference>
				<with
					variable="gama.ui.experiment.SimulationType">
					<equals
						value="MEMORIZE"></equals>
				</with>
			</and>
		</definition>
		<definition
			id="isInModelingPerspective">
			<with
				variable="activeWorkbenchWindow.activePerspective">
				<equals
					value="gama.ui.perspective.ModelingPerspective"></equals>
			</with>
		</definition>
		<definition
			id="isInSimulationPerspective">
			<with
				variable="activeWorkbenchWindow.activePerspective">
				<test
					property="gama.ui.containsString"
					value="Simulation"></test>
			</with>
		</definition>
		<definition
			id="isSimulationFinished">
			<and>
				<reference
					definitionId="isInSimulationPerspective"></reference>
				<with
					variable="gama.ui.experiment.SimulationRunningState">
					<equals
						value="FINISHED"></equals>
				</with>
			</and>
		</definition>
	</extension>
	<extension
		point="org.eclipse.ui.commands">
		<command
			categoryId="gama.ui.components"
			defaultHandler="gama.ui.experiment.commands.PlayPauseSimulationHandler"
			id="gama.ui.command.PlaySimulation"
			name="Play Experiment"></command>
		<command
			categoryId="gama.ui.components"
			defaultHandler="gama.ui.experiment.commands.PlayPauseSimulationHandler"
			id="gama.ui.command.PauseSimulation"
			name="Pause Simulation"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.StepByStepSimulation"
			name="Next Step"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.StepBackSimulation"
			name="Previous Step "></command>
		<command
			categoryId="gama.ui.components"
			defaultHandler="gama.ui.experiment.commands.ReloadSimulationHandler"
			id="gama.ui.command.ReloadSimulation"
			name="Reload Simulation"></command>
		<command
			categoryId="gama.ui.components"
			defaultHandler="gama.ui.experiment.commands.ShowHideParametersViewHandler"
			id="gama.ui.command.ShowHideParametersView"
			name="Show parameters"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.AddMonitor"
			name="Add a monitor"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.ShowHideConsoleView"
			name="Show console"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.Cancel"
			name="Cancel"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.PauseAndEdit"
			name="Pause at first error"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.WarningsAsErrors"
			name="Treat warnings like errors"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.ShowErrors"
			name="Display errors and warnings"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.SwitchToModelingPerspective"
			name="Switch to modeling perspective"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.LayoutDisplays"
			name="Layout display views">
			<commandParameter
				id="gama.displays.layout"
				name="layout"
				optional="false"
				typeId="gama.ui.application.String"></commandParameter>
		</command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.SwitchToSimulationPerspective"
			name="Switch to simulation perspective"></command>
		<command
					categoryId="gama.ui.components"
			defaultHandler="gama.ui.experiment.commands.DummyHandler"
			id="gama.ui.command.dummy"
			name="Separator"></command>
		<command
					categoryId="gama.ui.components"
			defaultHandler="gama.ui.experiment.commands.ShowInteractiveConsole"
			id="gama.ui.command.InteractiveConsole"
			name="Show Interactive Console"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.ToggleTabs"
			name="Toggle Display Tabs"></command>
		<command
			categoryId="gama.ui.components" id="gama.ui.command.CopyLayout"
			name="Copy Layout"></command>
		<command
			categoryId="gama.ui.components"
			id="gama.ui.command.ResetPerspective"
			name="Reset Perspective..."></command>
		<command
			categoryId="gama.ui.components"
			defaultHandler="gama.ui.experiment.commands.SynchronizeExperimentHandler"
			id="gama.ui.command.SynchronizeExperiment"
			name="Synchronize Experiment">
			<state
				class="gama.ui.experiment.commands.SyncExperimentState"
				id="org.eclipse.ui.commands.toggleState"></state>
		</command>
	</extension>
	<extension
		point="org.eclipse.ui.services">
		<serviceFactory
			factoryClass="gama.ui.experiment.factories.AgentMenuFactory">
			<service
				serviceClass="gama.ui.shared.interfaces.IAgentMenuFactory"></service>
		</serviceFactory>
		<serviceFactory
			factoryClass="gama.ui.experiment.factories.UserDialogFactory">
			<service
				serviceClass="gama.ui.shared.interfaces.IUserDialogFactory"></service>
		</serviceFactory>
		<sourceProvider
			provider="gama.ui.experiment.commands.SimulationStateProvider">
			<variable
				name="gama.ui.experiment.SimulationRunningState"
				priorityLevel="workbench"></variable>
			<variable
				name="gama.ui.experiment.SimulationType"
				priorityLevel="workbench"></variable>
		</sourceProvider>
		<serviceFactory
			factoryClass="gama.ui.experiment.factories.SpeedDisplayerFactory">
			<service
				serviceClass="gama.ui.shared.interfaces.ISpeedDisplayer"></service>
		</serviceFactory>
		<serviceFactory
			factoryClass="gama.ui.experiment.factories.StatusDisplayerFactory">
			<service
				serviceClass="gama.core.common.interfaces.IStatusDisplayer"></service>
		</serviceFactory>
		<serviceFactory
			factoryClass="gama.ui.experiment.factories.ConsoleDisplayerFactory">
			<service
				serviceClass="gama.core.common.interfaces.IConsoleDisplayer"></service>
		</serviceFactory>
		<serviceFactory
			factoryClass="gama.ui.experiment.factories.DisplayLayoutFactory">
			<service
				serviceClass="gama.ui.shared.interfaces.IDisplayLayoutManager"></service>
		</serviceFactory>
		<serviceFactory
			factoryClass="gama.ui.experiment.factories.RuntimeExceptionHandlerFactory">
			<service
				serviceClass="gama.core.common.interfaces.IRuntimeExceptionHandler"></service>
		</serviceFactory>
	</extension>
	<extension
		point="org.eclipse.core.expressions.propertyTesters">
		<propertyTester
			class="gama.ui.experiment.perspective.PerspectiveNamePropertyTester"
			id="gama.ui.PerspectiveNamePropertyTester"
			namespace="gama.ui"
			properties="containsString"
			type="java.lang.Object"></propertyTester>
	</extension>
</plugin>
